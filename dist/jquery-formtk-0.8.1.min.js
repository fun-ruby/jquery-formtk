/**
 * jQuery Form Toolkit JavaScript Library
 * https://github.com/fun-ruby/jquery-formtk
 *
 * Copyright 2013 Long On
 * Released under the MIT license
 *
 * Date: 2013-07-26  @preserve
 */
!function($){$.fn.formtk=function(action,options){var tk_render_checkbox=function(checkbox,values){if(values.push){var checked=false;$.each(values,function(){if(this==checkbox.value){checked=true;return false}});return checked}return values==checkbox.value};if(action==="serialize"){var params=$.extend({as_json:false},options);var data={};var entries=this.serializeArray();$.each(entries,function(){var name=this.name;var value=this.value||"";if(data[name]){if(data[name].push===undefined){data[name]=[data[name]]}data[name].push(value)}else{data[name]=value}});if(params.as_json){return JSON.stringify(data)}return data}if(action==="deserialize"){var params=$.extend({data:{}},options);var entries=this.find("[name]");var idx_of={};$.each(entries,function(){var name=this.name;var value=params.data[name]||"";switch(this.type){case"hidden":case"text":if(value.push){var i=idx_of[name]||0;value=value[i]||"";idx_of[name]=i+1}$(this).val(value);break;case"checkbox":var checked=tk_render_checkbox(this,value);$(this).prop("checked",checked);break;case"radio":$(this).prop("checked",value==this.value);break;default:}switch(this.tagName){case"SELECT":case"TEXTAREA":$(this).val(value);break;default:}});return this}if(action==="select_list"){var params=$.extend({append:false,include_blank:false,data:[],option_name:"name",option_value:"id"},options);var select=this;if(!params.append){select.empty()}if(params.include_blank){select.append(new Option)}$.each(params.data,function(){select.append(new Option(this[params.option_name],this[params.option_value]))});return select}$.error("Undefined .formtk() action: "+action)}}(jQuery);